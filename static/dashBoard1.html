<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Job Postings</title>
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <style>
        /* Optional: Add custom CSS styles here */
        .card{
            height: 250px;
        }
        body{
            background-color: #e7e8ff;
        }
        .jumbotron{
            background-color: #e7e8ff;
        }
        .skilllabel {
       
          float: right;
          margin: 10px; /* Adjust margin as needed */
          padding: 5px 10px; /* Adjust padding as needed */
          background-color: aqua;
          color: #fff; /* Text color */
          border-radius: 15px;
          font-size: 12px; /* Adjust font size as needed */
      }
      
      .label-primary {
       
          background-color: black ; 
         
         
          /* Add any additional styling here */
      }
        /* Sticky Sidebar */
        .list-group {
            position: sticky;
            top: 20px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
          <a class="navbar-brand" href="#">Job Search Dashboard</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="#">Profile</a>
              </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">
                      Logout
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="mr-1" style="width: 15px;" >
                        <path d="M4,12a1,1,0,0,0,1,1h7.59l-2.3,2.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0l4-4a1,1,0,0,0,.21-.33,1,1,0,0,0,0-.76,1,1,0,0,0-.21-.33l-4-4a1,1,0,1,0-1.42,1.42L12.59,11H5A1,1,0,0,0,4,12ZM17,2H7A3,3,0,0,0,4,5V8A1,1,0,0,0,6,8V5A1,1,0,0,1,7,4H17a1,1,0,0,1,1,1V19a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V16a1,1,0,0,0-2,0v3a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V5A3,3,0,0,0,17,2Z"></path>
                    </svg>
                  </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    
      <div class="container mt-4">
        <div class="row">
          <!-- Sidebar Component -->
          <div class="col-lg-3">
            <div class="collapse navbar-collapse side-bar" id="navbarSupportedContent">
                <ul class="navbar-nav flex-column ">
                  <li class="nav-item">
                    <a class="nav-link active" href="/">
                      <svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18px" height="18px" viewBox="-24 -24 448.00 448.00" xml:space="preserve" stroke="#000000" stroke-width="16.800168" transform="matrix(1, 0, 0, 1, 0, 0)rotate(0)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M382.688,182.686H59.116l77.209-77.214c6.764-6.76,6.764-17.726,0-24.485c-6.764-6.764-17.73-6.764-24.484,0L5.073,187.757 c-6.764,6.76-6.764,17.727,0,24.485l106.768,106.775c3.381,3.383,7.812,5.072,12.242,5.072c4.43,0,8.861-1.689,12.242-5.072 c6.764-6.76,6.764-17.726,0-24.484l-77.209-77.218h323.572c9.562,0,17.316-7.753,17.316-17.315 C400.004,190.438,392.251,182.686,382.688,182.686z"></path> </g> </g></svg>
                      Home</a>
                  </li>
                  <li class="nav-item">
                    <a class=" list-group-item-action active nav-link " href="#suggest">JobListings</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#analyze">JobFit Analyzer</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#saved">Saved Jobs</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#appied">Applied Jobs</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">Settings</a>
                  </li>
                  <li type="button" class="btn ">
                    Notifications <span class="badge badge-light">4</span>
                  </li>
                </ul>
              </div>
          </div>
    
          <div class="col-lg-9">
            <!-- JobListings Component -->
            
        <!-- JobListings Component -->

        <div class="jumbotron">
            <h1 class="display-4">Upload Your CV</h1>
            <p class="lead">Please follow the instructions below to upload your CV:</p>
            <hr class="my-4">
            <p>Step 1: Prepare your CV in PDF format.</p>
            <p>Step 2: Click on the "Choose file" button below.</p>
            <p>Step 3: Select your CV file from your computer.</p>
            <p>Step 4: Click the "Upload" button to upload your CV.</p>
              <!-- <p class="lead">Please upload your resume in PDF format:</p> -->
              <form action="/upload" method="post" id="uploadForm" enctype="multipart/form-data">
                  <div class="custom-file">
                      <input type="file" class="custom-file-input" id="resumeInput" name="resume" accept=".pdf" onchange="updateFileName()">
                      <label class="custom-file-label" for="resumeInput" >Choose file</label>
                  </div>
                  <br>
                  <button type="submit"   class="btn btn-primary mt-2" >Upload</button> <span class="lead mt-4">or</span>
                  <button class="btn btn-info mt-2 ml-3">Generate Your Resume </button>
  
                </form>
                
                <!-- <h2>Or</h2> -->
                
              </div>
              <div>
                <div style="display: none;">
                  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nihil, ad delectus excepturi exercitationem a quis rerum quaerat vel, officiis repudiandae vero non! Omnis provident deleniti molestiae, dolor fugiat ab. Sequi vero soluta dolor, distinctio dolorum reprehenderit sit magni repellendus praesentium vel temporibus dolorem veniam facilis blanditiis, porro est id provident. Voluptates, ea blanditiis! Dolore sed saepe porro ea sequi aliquid numquam autem blanditiis dolor, quis atque consequuntur corrupti id asperiores accusantium repellat consectetur fugiat iste cumque beatae obcaecati voluptatibus animi. Atque sed veritatis temporibus saepe unde doloribus, beatae quas dolor, corporis tenetur eveniet dolorem asperiores molestiae accusantium distinctio pariatur consequuntur facilis laborum iusto, omnis ducimus non expedita ab a! Ea dicta architecto ad error corporis. Quos explicabo maiores provident eius excepturi? Mollitia nobis repudiandae voluptatibus adipisci eveniet magni praesentium, ipsa eos aperiam architecto nisi dolores maxime illo natus quisquam rerum distinctio accusamus qui! Nihil, dolores! Cum eligendi similique illo laboriosam, doloribus magni quam, excepturi, nemo repudiandae repellendus a! Saepe in, omnis dicta maiores exercitationem veniam aliquam! Animi eum est quidem dicta maxime quam nesciunt distinctio, sunt dignissimos dolorum adipisci tempora atque totam recusandae numquam impedit dolor rem id laudantium reprehenderit iusto eaque consectetur harum! Accusamus est at cumque! Quam, temporibus! Quibusdam nam, natus, fugiat quos facilis ullam aut ipsa quam illum atque quaerat nulla id sed! Tempore, minima sunt voluptas impedit similique facere eos. Ullam rem odit incidunt perferendis dolorem maxime odio qui quasi, velit repellendus modi tempora obcaecati illum nulla magni quaerat quisquam eos tempore, id minus consequatur repudiandae a nobis hic! Corporis temporibus aliquid sunt molestias blanditiis iusto, sequi quos dolorum excepturi, autem, quia magnam unde nam consequatur nulla mollitia tenetur? Temporibus veniam veritatis consequatur velit tempora aspernatur, aperiam sequi, vel fugi
                  at minima facere sit eum dolore, 
                  sunt sed ipsum harum totam adipisci? 
                  Soluta delectus iusto facilis reprehenderit?
                </div>
              </div>
             
              
              
              <section id="analyze">
                <div class="container">
                    <div class="header">
                        <h1>Smart ATS</h1>
                        <p>Improve Your Resume ATS</p>
                        <img src="https://via.placeholder.com/150" alt="Smart ATS Logo">
                    </div>
                    <div class="content">
                        <p>Welcome to Smart ATS - your tool for improving your resume's performance in Applicant Tracking Systems (ATS). ATS is software used by employers to manage the hiring process, and it often scans resumes for keywords and formatting.</p>
                        <p>With Smart ATS, you can optimize your resume by analyzing job descriptions, pasting them below, and uploading your resume. Our tool will provide feedback on how well your resume matches the job description and suggest improvements.</p>
                    </div>
                    <form action="/improvecv" method="post" enctype="multipart/form-data">
                        <div class="form-group">
                            <label for="job_description">Paste the Job Description</label>
                            <textarea id="job_description" name="job_description" placeholder="Enter the job description here..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="resume">Upload Your Resume (PDF only)</label>
                            <input type="file" id="resume" name="resume" accept=".pdf" required>
                            <small>Please upload the PDF</small>
                        </div>
                        <button type="submit" class="btn">Submit</button>
                    </form>
                </div>
                <div class="matching-jobs">
                    <h2>Matching Jobs</h2>
                    <div id="jobListingContainer" class="row">
                        <!-- Matching jobs will be dynamically added here -->
                        <div class="alert alert-box">
                          Output ...
                        </div>
                    </div>
                </div>
            </section>
            
            <div class="alert alert-box">
              ChatBot is on Processing...
            </div>
           
          </div>
        </div>
      </div>
    

    <script>
        // Define matchingUrls array using Jinja
        var matching_Jobs = {{ matching_jobs | tojson  | safe }};

        // Function to create job listing box
        function createJobListing(job) {
            // Create elements for job listing box
            var jobBox = document.createElement('div');
            jobBox.classList.add('col-12', 'col-md-6', 'mb-3');  // Adjust column width as per your requirement
            var jobCard = document.createElement('div');
            jobCard.classList.add('card');
            var jobCardBody = document.createElement('div');
            jobCardBody.classList.add('card-body');
            var jobTitle = document.createElement('h5');
            jobTitle.classList.add('card-title');
            jobTitle.textContent = 'Job Role: ' + job['title'].join(', ');
            var jobLocation = document.createElement('p');
            jobLocation.classList.add('card-text');
            jobLocation.textContent = 'Location: ' + job['job_location'].join(', ');
            var applyButton = document.createElement('a');
            applyButton.classList.add('btn', 'btn-primary', 'mr-2');
            applyButton.setAttribute('href', job['url']);
            applyButton.setAttribute('target', '_blank');
            applyButton.textContent = 'Apply';
            var saveButton = document.createElement('button');
            saveButton.classList.add('btn', 'btn-secondary');
            saveButton.textContent = 'Save Job';
            var labelSkillButtons = document.createElement('button');
            labelSkillButtons.classList.add('skilllabel', 'label-primary');
            var skill1=job['job_skills'].slice(0,1);
            var skill2=job['job_skills'].slice(1,2);
            labelSkillButtons.textContent = skill1;  
            var labelSkillButtons2 = document.createElement('button');
            labelSkillButtons2.classList.add('skilllabel', 'label-primary');
            //var skill2 = job['job_skills'].split(',')[1].trim(); // Get the second skill
            labelSkillButtons2.textContent = skill2;

            

            // Append elements to job listing box
            jobCardBody.appendChild(labelSkillButtons);
            jobCardBody.appendChild(labelSkillButtons2)
            jobCardBody.appendChild(jobTitle);
            jobCardBody.appendChild(jobLocation);
            jobCardBody.appendChild(applyButton);
            jobCardBody.appendChild(saveButton);
            jobCard.appendChild(jobCardBody);
            jobBox.appendChild(jobCard);

            // Append job listing box to container
            document.getElementById('jobListingContainer').appendChild(jobBox);
        }
        let countDiv=0;
        for (let i = 0; i < matching_Jobs.length; i++) {
          let jsonString = matching_Jobs[i];
          jsonString = jsonString.replace(/'/g, '"');
          jsonString = jsonString.replace(/,\s+'/g, ", ");
          jsonString = jsonString.replace(/:\s+'/g, ": ");
          var jsonObject = JSON.parse(jsonString);
          createJobListing(jsonObject);
          countDiv++;
          if (countDiv > 10) {
              break;
          }
      }
      
        // Create job listing boxes for each URL

      </script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>
